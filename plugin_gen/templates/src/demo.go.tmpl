package main

import (
	"fmt"
	"log"
	"strings"
	"{{.ProjectName}}/bridge"
)

func byteArrayToHex(byteArray []byte) string {
	if byteArray == nil {
		return "null"
	}
	var builder strings.Builder
	for i, b := range byteArray {
		if i > 0 {
			builder.WriteString(" ")
		}
		builder.WriteString(fmt.Sprintf("%02x", b))
	}
	return builder.String()
}

func init() {
	bridge.InitMethodHandle(func(method string, data []byte) []byte {
		log.Println("Go Received:", method, byteArrayToHex(data))
		bridge.CallDartMethod(method, data)
		return data
	})
}
